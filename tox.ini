[tox]
env_list =
    lint

[testenv:lint]
description = run static analysis and style check
pass_env =
    PRE_COMMIT_HOME
base_python = {[base]base_python}
skip_install = true
deps =
    -rrequirements{/}lint.txt
commands =
    pre-commit run --all-files

[testenv:style]
description = apply style

skip_install = true
deps =
    -rrequirements{/}style.txt
commands =
    bash -c 'sort-all $(find ignition -name "*.py" -type f)'
    black --quiet ignition
    isort ignition
    flake8 ignition
    pydocstyle ignition
allowlist_externals =
    bash

[base]
base_python = python3.10

[flake8]
ignore = F401, F821
max-complexity = 10
max-doc-length = 72
max-line-length = 88

[isort]
known_first_party = incendium
profile = black
py_version = 27

[pydocstyle]
add_select = D400, D401
convention = google
